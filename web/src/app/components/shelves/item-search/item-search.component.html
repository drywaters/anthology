<div class="search-controls">
    <mat-form-field appearance="outline">
        <mat-label>Item type</mat-label>
        <mat-select [formControl]="typeControl">
            @for (option of typeOptions; track option) {
                <mat-option [value]="option.value">
                    {{ option.label }}
                </mat-option>
            }
        </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="search-field">
        <mat-label>Add item</mat-label>
        <input
            matInput
            type="text"
            placeholder="Search by title"
            [formControl]="searchControl"
            [matAutocomplete]="itemSearchAutocomplete"
        />
        <mat-autocomplete
            #itemSearchAutocomplete="matAutocomplete"
            (optionSelected)="handleSelection($event.option.value)"
        >
            @if (searching()) {
                <mat-option disabled>Searching...</mat-option>
            }
            @for (item of searchResults(); track item) {
                <mat-option [value]="item.id">
                    <span class="item-option__title">{{ item.title }}</span>
                    @if (item.creator) {
                        <span class="item-option__creator">{{ item.creator }}</span>
                    }
                </mat-option>
            }
            @if (!searching() && !searchResults().length && searchQuery.length >= minSearchLength) {
                <mat-option disabled> No matches found </mat-option>
            }
            @if (!searching() && !searchResults().length && searchQuery.length < minSearchLength) {
                <mat-option disabled> Type at least {{ minSearchLength }} characters </mat-option>
            }
        </mat-autocomplete>
    </mat-form-field>
</div>
