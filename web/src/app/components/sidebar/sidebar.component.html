<aside class="sidebar" data-testid="sidebar">
    <div class="brand">
        <img src="/anthology-logo.png" alt="Anthology logo" class="brand-mark" />
        <div class="brand-text">
            <div class="brand-title">Anthology</div>
        </div>
    </div>

    <nav class="nav">
        <ng-container *ngFor="let item of navItems">
            <div class="nav-section">
                <a
                    *ngIf="item.route"
                    class="nav-link"
                    [class.nav-link--expandable]="item.children?.length"
                    [attr.aria-expanded]="item.children?.length ? expandedSection === item.route : null"
                    [routerLink]="item.route"
                    routerLinkActive="active"
                    [routerLinkActiveOptions]="item.exact ? exactOptions : defaultOptions"
                    (click)="handleSectionClick(item)"
                >
                    <mat-icon>{{ item.icon }}</mat-icon>
                    <span>{{ item.label }}</span>
                    <mat-icon class="nav-link__chevron" *ngIf="item.children?.length">
                        {{ expandedSection === item.route ? 'expand_less' : 'expand_more' }}
                    </mat-icon>
                </a>

                <div class="nav-submenu" *ngIf="item.children?.length && expandedSection === item.route">
                    <a
                        *ngFor="let child of item.children"
                        class="nav-link nav-link--sub"
                        [routerLink]="child.route"
                        routerLinkActive="active"
                        [routerLinkActiveOptions]="child.exact ? exactOptions : defaultOptions"
                    >
                        <mat-icon>{{ child.icon }}</mat-icon>
                        <span>{{ child.label }}</span>
                    </a>
                </div>
            </div>
        </ng-container>
    </nav>

    <div class="sidebar-footer">
        <a href="#" class="nav-link logout" (click)="handleLogoutClick($event)">
            <mat-icon>logout</mat-icon>
            <span>Log out</span>
        </a>
    </div>
</aside>
