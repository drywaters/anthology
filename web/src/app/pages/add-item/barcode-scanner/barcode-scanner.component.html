<div
    class="scanner-feedback"
    *ngIf="scannerActive && (scannerStatus || scannerError)"
    aria-live="polite"
>
    <div class="status" *ngIf="scannerStatus">{{ scannerStatus }}</div>
    <div class="error" *ngIf="scannerError">{{ scannerError }}</div>
</div>

<div
    class="scanner-preview"
    [class.scanner-preview--visible]="scannerActive"
    [attr.aria-hidden]="scannerActive ? 'false' : 'true'"
>
    <p class="hint" *ngIf="scannerActive">
        Once we read a code, we'll automatically run the lookup for you.
    </p>
    <div class="video-frame">
        <video #scanVideo autoplay playsinline muted class="scanner-video"></video>
        <div class="scanner-overlay" *ngIf="scannerActive && scannerReady">
            <div class="scanner-frame"></div>
        </div>
        <div class="scanner-overlay scanner-overlay--flash" *ngIf="scannerFlash"></div>
        <div class="scanner-overlay scanner-overlay--busy" *ngIf="scannerProcessing">
            <div class="busy-indicator">
                <mat-progress-spinner mode="indeterminate" diameter="44"></mat-progress-spinner>
                <div class="busy-text">{{ scannerStatus ?? 'Found barcode. Searching...' }}</div>
            </div>
        </div>
    </div>
</div>
