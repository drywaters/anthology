<div class="lookup-preview" *ngIf="results.length">
    <div class="preview-header">
        <h3>Metadata preview</h3>
        <p>
            Review the fetched details, then choose the best match to add immediately or continue
            editing from the Manual Entry tab.
        </p>
    </div>

    <div class="preview-list">
        <article class="preview-card" *ngFor="let preview of results">
            <div class="preview-grid">
                <div class="preview-field">
                    <span class="label">Title</span>
                    <span class="value">{{ preview.title || '—' }}</span>
                </div>
                <div class="preview-field">
                    <span class="label">Creator</span>
                    <span class="value">{{ preview.creator || '—' }}</span>
                </div>
                <div class="preview-field">
                    <span class="label">Release year</span>
                    <span class="value">{{ preview.releaseYear ?? '—' }}</span>
                </div>
                <div class="preview-field">
                    <span class="label">Number of pages</span>
                    <span class="value">{{ preview.pageCount ?? '—' }}</span>
                </div>
                <div class="preview-field">
                    <span class="label">EAN / ISBN13</span>
                    <span class="value">{{ preview.isbn13 || '—' }}</span>
                </div>
                <div class="preview-field">
                    <span class="label">ISBN-10</span>
                    <span class="value">{{ preview.isbn10 || '—' }}</span>
                </div>
            </div>

            <div class="preview-description" *ngIf="preview.description">
                <h4>Description</h4>
                <p>{{ preview.description }}</p>
            </div>

            <div class="preview-actions">
                <button
                    mat-flat-button
                    color="primary"
                    type="button"
                    class="preview-add"
                    (click)="handleQuickAdd(preview)"
                    [disabled]="busy"
                >
                    Add to collection
                </button>
                <button mat-stroked-button type="button" (click)="handleUseForManual(preview)">
                    Use for manual entry
                </button>
            </div>
        </article>
    </div>
</div>
